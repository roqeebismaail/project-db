<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Team Developer</title>
    <link rel="stylesheet" href="css/style.css" />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
  </head>
  <body>
    <div class="app-container">
      <div class="app-background d-flex u-d-center">
        <div class="background-layer background-layer--1">&nbsp;</div>
        <div class="background-layer background-layer--2">&nbsp;</div>
        <div class="background-layer background-layer--3">&nbsp;</div>
        <!-- <div class="background-wall background-wall--4">&nbsp;</div> -->

        <div class="container--login content gap--4">
          <div class="header header--login">
            <div class="icons icons-back icons-back--1">
              <span class="material-symbols-outlined">arrow_back</span>
            </div>

            <img src="img/logo.png" alt="img-logo" class="logo--2" />

            <div class="alert d-flex u-d-center d-none">
              <div class="close">
                <span class="material-symbols-outlined"> close </span>
              </div>

              <span class="alert-message" id="alert-message"></span>
            </div>
          </div>

          <div class="login--form d-flex flex-col u-d-center">
            <div class="w-75 d-flex flex-col u-d-center">
              <p class="heading-primary">Lorem, ipsum dolor sit.</p>

              <label for="email">Email</label>
              <input type="text" id="email" />

              <label for="password">Password</label>
              <div class="for-password">
                <input type="password" id="password" /><span
                  class="material-symbols-outlined hide-password"
                >
                  visibility_off
                </span>
              </div>

              <span class="login-btn btn btn--secondary">Login</span>

              <span class="reset"
                >Forgot Password?
                <a href="" id="reset">Reset password!</a></span
              >

              <span class="create"
                >New Account?
                <a href="sign-up.html" id="sign-up">Sign Up.</a></span
              >
            </div>
          </div>

          <div class="footer footer--login"></div>
        </div>
      </div>
    </div>

    <script>
      "use strict";

      let dataBase = JSON.parse(localStorage.getItem("dataBase"));

      let backBtn = document.querySelector(".icons-back--1");

      const loginBtn = document.querySelector(".login-btn");

      let hidePassword = document.querySelector(".hide-password");

      const alert = document.querySelector(".alert");

      const closeBtn = document.querySelector(".close");

      const alertMessage = document.querySelector(".alert-message");

      function popAlert(description) {
        alert.classList.remove("d-none");
        alertMessage.innerHTML = description;

        console.log("error");

        setTimeout(() => {
          alert.classList.add("d-none");
        }, 3000);
      }

      backBtn.addEventListener("click", () => {
        window.location.href = "welcome.html";
      });

      hidePassword.addEventListener("click", () => {
        if (password.type === "password") {
          password.type = "text";
          password.nextElementSibling.innerHTML = "visibility"; // Assuming 'visibility_off' means password is visible
        } else {
          password.type = "password";
          password.nextElementSibling.innerHTML = "visibility_off"; // Assuming 'visibility' means password is hidden
        }
      });

      loginBtn.addEventListener("click", () => {
        dataBase.forEach((element) => {
          if (
            element.email == email.value &&
            element.password == password.value
          ) {
            console.log(element);

            loginBtn.innerHTML = "loading...";

            setTimeout(() => {
              loginBtn.setAttribute("disabled", true);

              window.location.href = "home.html";
            }, 3000);
          } else if (element.email != email.value) {
            popAlert("Account does not exist, Sign up!");
          } else {
            popAlert("Incorrect email or password! ðŸ˜¥");
          }
        });
      });
    </script>
  </body>
</html>
